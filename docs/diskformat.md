Описание из МПСиС

Каждый из блоков дополнительной памяти имитирует НГМД со следующими информационными характеристиками:

         общая информационная емкость . . . 64 Кбайт
         число "дорожек"  . . . . . . . . . 64
         число "секторов" на дорожке . . . . 8
         информационная емкость "сектора" . 128 байт

Описание из ЮТ

Прежде чем рассмотреть эти операции, познакомимся с конкретной организацией гибкого диска и его электронного заменителя — квазидиска.

Диск состоит из 77 дорожек, пронумерованных от 0 до 76. На каждой дорожке находятся 26 секторов, и в каждом секторе 128 байт. Таким образом емкость диска равна 256 Кбайт. Это адресное пространство используется следующим образом: нулевая и первая дорожки содержат операционную систему СР/М. В частности, БДОС размещается в 26 секторах нулевой дорожки и в 19 секторах первой дорожки. Там размещается та же информация, что и в ОЗУ от С400Н до D9FFH. С 20 по 26-й сектор первой дорожки размещается БСВВ (DA00H-DBFFH). В 26 секторах второй дорожки содержатся оглавление и справочные данные о файлах, находящихся на диске

Электронный квазидиск — это модуль ОЗУ, подобный тому, который мы рассмотрели ранее с объемом памяти от 64 Кбайт до 256 Кбайт, имеющий дополнительные возможности по вводу/ выводу информации в соответствии с командами БСВВ. Существуют разные способы организации обмена информацией с электронным квазидиском. Можно использовать дополнительные порты приема и выдачи данных на квазидиск, порт управления и порты адресации. Однако проще всего осуществить обмен с квазидиском, инициализируя его как адресное пространство стека.

На рисунке 2 изображена электрическая схема квазидиска. Кроме микросхем ОЗУ, в него входят еще семь микросхем. Микросхемы ОЗУ включаются параллельно тем, что используются в модуле ОЗУ. Всего может быть от одного до четырех блоков по восемь микросхем К565РУ5 в каждом.

Отдельно у этих блоков включаются только выводы CAS:

    CAS 1 (квазидиск на 64 К, микросхемы ОЗУ DD8-DD15),
    CAS 2 (квазидиск на 128 К, микросхемы ОЗУ DD16-DD23),
    CAS 3 (квазидиск на 192 К, микросхемы DD24-DD31),
    CAS 4 (квазидиск на 256 К, микросхемы DD32-DD39).

Такое простое взаимодействие с квазидиском достигнуто благодаря дополнительному управляющему сигналу, который формируется на микросхеме DD 1.1 из слова состояния (2-й разряд) и который активен, когда идет обращение к стеку. Таким образом, при обращении к стеку, когда в порт 40Н записано 00, электронный квазидиск “открывается”. Если инициализация порта 40 не произведена, то стек формируется, как обычно, в адресном пространстве основного ОЗУ.

Каждый из блоков дополнительной памяти имитирует диск со следующими параметрами:

    общая емкость — 64 Кбайт
    число “дорожек” — 64
    число секторов на дорожке — 8

Приведенная распечатка кодов загрузчика СР/М соответствует объему ОЗУ в 256 КБайт. При использовании меньшего объема диска в ячейку ОЗУ загрузчика СР/М 4А50Н следует ввести поправку:

    для диска объемом 64 Кбайт—39Н
    для диска объемом 128 Кбайт - 79Н
    для диска объемом 192 Кбайта — В9Н

Фактическая структура

По описанию из МПСиС вообще непонятно. Вносит путаницу наличие многих дисков, когда фактически он один. Блок ОЗУ назван диском,
при этом по описанию диск один.

ЮТ-88 еще больше запутывает, т.к. там вообще логическая структура и физическое описание никак не увязаны.

По исходным кодам BIOS от ЮТ-88 описание никак не совпадало с реальностью. Действительно, логическая структура "блока" квазидиска
имеет 64*кол-во-блоков дорожек. Размер сектора 128 и число секторов - 8. Причем, размеры квазидиска учитывались только в
загрузчике, а в BIOS всегда было 256кб диск. Поэтому не удивительно, что стабильность CP/M-64 была не на высоте. BIOS несколько
пофикшен и подрихтован. Поддержка оригинального формата квазидиска теперь не обеспечивается, т.к. никаких программ для
его сохранения, кроме как ch.com, в природе не обнаружено. Только описание. 

Итого, имеет два уровня абстракции.

Квази-диск имеет структуру:

  общая информационная емкость . . . 64/128/192/256/320/384/448/512 Кбайт
  число "дорожек"  . . . . . . . . . 64/128/192/256/320/384/448/512
  число "секторов" на дорожке . . . . 8
  информационная емкость "сектора" . 128 байт

BIOS собирается отдельно для всех вариантов диска (8 версий).

